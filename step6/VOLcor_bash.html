<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>VOLcor.sh</title>
<link rel="stylesheet" type="text/css" href="highlight.css">
</head>
<body class="hl">
<pre class="hl"><span class="hl slc">#!/bin/bash</span>
<span class="hl kwa">if</span> <span class="hl opt">[</span> <span class="hl kwd">$#</span> <span class="hl opt">-</span>eq <span class="hl num">0</span> <span class="hl opt">] ;</span> <span class="hl kwa">then</span> 
   <span class="hl kwb">echo</span> <span class="hl str">&quot;provide project name&quot;</span>
   <span class="hl kwb">exit</span>
<span class="hl kwa">fi</span>    
dire<span class="hl opt">=</span><span class="hl kwd">$1</span>
<span class="hl kwa">for</span> i <span class="hl kwa">in</span> <span class="hl opt">{</span><span class="hl num">0</span>.<span class="hl num">.5</span><span class="hl opt">};</span> <span class="hl kwa">do</span>
         <span class="hl kwc">cp</span> bound<span class="hl opt">/</span>BATTERY<span class="hl kwd">$i</span><span class="hl opt">/</span>scaled0<span class="hl opt">/</span>pullx.xvg .<span class="hl opt">/</span>pullx<span class="hl kwd">$i</span>.xvg
         <span class="hl kwc">grep</span> <span class="hl opt">-</span>v <span class="hl str">&quot;&#64;\|#&quot;</span> pullx<span class="hl kwd">$i</span>.xvg <span class="hl opt">&gt;&gt;</span> pull.xvg 
<span class="hl kwa">done</span>
<span class="hl kwc">rm</span> pullx?.xvg 
<span class="hl kwb">echo</span> <span class="hl str">&quot;..computing volume correction&quot;</span> 
<span class="hl kwc">awk</span> <span class="hl str">'{x+=10*</span><span class="hl ipl">$2</span><span class="hl str">; x2+=100*</span><span class="hl ipl">$2</span><span class="hl str">^2; print</span> <span class="hl ipl">$1</span><span class="hl str">,</span><span class="hl ipl">$2</span> <span class="hl str">}END{com=x/NR; sig=sqrt(x2/NR-(x/NR)^2); vol= 4*3.14*(2*sig)^3/3;  dv=0.595*log(vol/1661); print &quot;#  &lt;R_com&gt;=&quot;com&quot;+/-&quot;sig&quot;  VOL=&quot;vol&quot;  VOL_cor=&quot;dv}'</span> pull.xvg <span class="hl opt">&gt;</span> tmp
<span class="hl kwa">if</span> <span class="hl opt">[ ! -</span>d Results <span class="hl opt">];</span> <span class="hl kwa">then</span>
    mkdir Results 
<span class="hl kwa">fi</span>
<span class="hl kwc">tail</span> <span class="hl opt">-</span><span class="hl num">1</span> tmp <span class="hl opt">&gt;</span> Results<span class="hl opt">/</span><span class="hl kwd">$dire</span>.VOL_cor
<span class="hl kwb">echo</span> <span class="hl str">&quot;..making COM-COM histogram&quot;</span>   
<span class="hl kwc">awk</span> <span class="hl str">'{if(</span><span class="hl ipl">$1</span><span class="hl str">!=&quot;#&quot;) print</span> <span class="hl ipl">$2</span><span class="hl str">*10}'</span> tmp | histog <span class="hl opt">+</span>i0.01 <span class="hl opt">&gt;</span> Results<span class="hl opt">/</span><span class="hl kwd">${dire}</span>_com.hst
<span class="hl kwc">rm</span> tmp pull.xvg
<span class="hl kwb">echo</span> <span class="hl str">&quot;Done&quot;</span>
<span class="hl kwb">exit</span>

 
</pre>
</body>
</html>
<!--HTML generated by highlight 3.18, http://www.andre-simon.de/-->
